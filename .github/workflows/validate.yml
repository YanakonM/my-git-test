name: Validate Repository

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Check required files
      run: |
        echo "ğŸ” Checking for required files..."
        
        required_files=(
          "README.md"
          "index.html"
          "style.css"
          "CHANGELOG.md"
        )
        
        for file in "${required_files[@]}"; do
          if [ -f "$file" ]; then
            echo "âœ… Found: $file"
          else
            echo "âŒ Missing: $file"
            exit 1
          fi
        done
        
        echo "âœ… All required files present!"
    
    - name: Validate HTML
      run: |
        echo "ğŸ” Checking HTML syntax..."
        if grep -q "<!DOCTYPE html>" index.html; then
          echo "âœ… Valid HTML5 DOCTYPE"
        else
          echo "âŒ Missing HTML5 DOCTYPE"
          exit 1
        fi
        
    - name: Count commits
      run: |
        echo "ğŸ“Š Repository Statistics:"
        echo "Total commits: $(git rev-list --count HEAD)"
        echo "Branches: $(git branch -r | wc -l)"
        
    - name: Success message
      run: |
        echo "âœ… All validations passed!"
        echo "ğŸ‰ Repository is in good shape!"
