# ===================================
# GitHub Actions Workflow
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á Repository
# ===================================

name: Validate Repository

# ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏´‡πâ workflow ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
on:
  push:
    branches: [ main, develop ]  # ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£ push ‡πÑ‡∏õ‡∏ó‡∏µ‡πà main ‡∏´‡∏£‡∏∑‡∏≠ develop
  pull_request:
    branches: [ main, develop ]  # ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Pull Request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà main ‡∏´‡∏£‡∏∑‡∏≠ develop

# ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥
jobs:
  validate:
    runs-on: ubuntu-latest  # ‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö Ubuntu ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
    
    # ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
    steps:
    # ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏î‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏≤‡∏Å repository
    - name: Checkout code
      uses: actions/checkout@v4
      
    # ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
    - name: Check required files
      run: |
        echo "üîç Checking for required files..."
        
        required_files=(
          "README.md"
          "index.html"
          "style.css"
          "CHANGELOG.md"
        )
        
        for file in "${required_files[@]}"; do
          if [ -f "$file" ]; then
            echo "‚úÖ Found: $file"
          else
            echo "‚ùå Missing: $file"
            exit 1
          fi
        done
        
        echo "‚úÖ All required files present!"
    
    # ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö HTML Syntax
    - name: Validate HTML
      run: |
        echo "üîç Checking HTML syntax..."
        if grep -q "<!DOCTYPE html>" index.html; then
          echo "‚úÖ Valid HTML5 DOCTYPE"
        else
          echo "‚ùå Missing HTML5 DOCTYPE"
          exit 1
        fi
        
    # ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô commits
    - name: Count commits
      run: |
        echo "üìä Repository Statistics:"
        echo "Total commits: $(git rev-list --count HEAD)"
        echo "Branches: $(git branch -r | wc -l)"
        
    # ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 5: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
    - name: Success message
      run: |
        echo "‚úÖ All validations passed!"
        echo "üéâ Repository is in good shape!"
